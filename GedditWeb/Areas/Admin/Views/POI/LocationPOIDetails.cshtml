@model GedditWeb.Areas.Admin.Models.POI.LocationPOIDetails
@{
    ViewBag.Title = "LocationPOIDetails";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<script src="https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js"></script>
<link href="https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css" rel="stylesheet" />
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.3.0/mapbox-gl-geocoder.min.js"></script>

<style>

    #map {
        width: 100%;
        height: 600px;
    }
</style>

@using (Html.BeginForm("LocationPOIDetails", "POI", FormMethod.Post))
{

    <div class="row">
        <div class="col-lg-6">
            <div class="panel panel-inverse">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        Location
                    </h4>
                </div>

                <div class="form-group m-r-40 m-l-40 m-b-10 m-t-20" align="center">
                    <div class="progress progress-lg rounded-corner m-b-5">
                        <div class="progress-bar bg-success f-s-10 f-w-600" style="width:75%;">Step 3: Location</div>
                    </div>
                </div>

                <br/>

                <div id="map"></div>

                <div class="form-group m-r-40 m-l-40 m-b-10 m-t-20" align="center">
                    @Html.EditorFor(model => model.Latitude, new { htmlAttributes = new { @class = "form-control form-control-lg", @placeholder = Html.DisplayNameFor(m => m.Latitude) } })
                </div>
                <div class="form-group m-r-40 m-l-40 m-b-10 m-t-20" align="center">
                    @Html.EditorFor(model => model.Longitude, new { htmlAttributes = new { @class = "form-control form-control-lg", @placeholder = Html.DisplayNameFor(m => m.Longitude) } })
                </div>


                <div class="form-group m-r-40 m-l-40 m-b-20 m-t-20">
                    <button type="submit" class="btn btn-success float-left" name="prevBtn">Previous</button>
                    <button type="submit" class="btn btn-success float-right" name="nextBtn">Next</button>
                </div>
                <br />
                <br />
                <br />

            </div>

        </div>
    </div>

}

<script>
    L.mapbox.accessToken = "pk.eyJ1IjoibGF1cmdhbnRhIiwiYSI6ImNqbTh2Yzd0eDBpc2YzcXVrZ3JiNDU2c20ifQ.RIDqA_M7xhBtCwO9VBPa9g";
    var map = L.mapbox.map("map", "mapbox.streets")
        .setView([40, -74.50], 9)
        .addControl(L.mapbox.geocoderControl('mapbox.places', {
            autocomplete: true
        }));

    map.on("click", function (e) {
        var marker = new L.marker(e.latlng,
            {
                icon: L.mapbox.marker.icon(
                    {
                        'marker-color': 'ff8888'
                    }),
                draggable: true
            });

        marker.addToMap(map);
    });
</script>